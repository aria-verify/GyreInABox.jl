var documenterSearchIndex = {"docs":
[{"location":"#GyreInABox","page":"Home","title":"GyreInABox","text":"Documentation for GyreInABox.","category":"section"},{"location":"#Model-details","page":"Home","title":"Model details","text":"The model is an adaptation of the baroclinic gyre example from the MITgcm documentation. It simulates a wind and buoyancy forced double-gyre ocean circulation on a spherical shell sector spatial domain, with default domain extents (0^circ 60^circ) times (15^circ 75^circ) times (-1800textsfm 0textsfm) (longitude × latitude × depth dimensions).\n\nBy default a non-linear TEOS-10 polynomial equation of state is used to compute buoyancy from salinity and temperature fields. No slip / no-flux boundary conditions are applied to the velocity fields on all walls, and a boundary condition corresponding to a damping zonal drag on the bottom surface. The zonal velocity component is subject to a latitude dependent wind stress roughly reflecting average zonal wind patterns at the surface. The temperature and salinity fields have no-flux boundary conditions applied on all walls and the bottom surface, and relaxation boundary conditions on the top surface which restore the surface fields towards a latitude dependent reference temperature / salinity with a parameterized relaxation time. The surface wind stress, reference temperature and reference salinity as a function of latitude are shown in the figure below.\n\n(Image: Surface forcings for model)\n\nThe model is initialised from rest (zero velocity). The temperature and salinity fields are initialised to match the reference temperature and salinity at the surface and following smoothly varying thermocline / halocline like profiles with depth, and constant in longitude, as shown in the figure below.\n\n(Image: Initial temperature and salinity fields for model)","category":"section"},{"location":"#Usage-example","page":"Home","title":"Usage example","text":"The below example illustrates setting up and running a simulation of the model with the default parameter values and configuration modulo changing the model to record only a horizontal (surface) slice and depth slice along longitude axis as outputs. The resulting horizontal and depth slices of simulated fields are recorded as an animation using CairoMakie. A coarse default grid size (60 × 60 × 15) and small simulation time (60 days) are set so as to allow a simulation to run in around 5 minutes on a CPU, but if running on a GPU (controlled by architecture keyword argument to GyreInABoxConfiguration) then finer spatial discretizations and longer simulation times can easily be used.\n\nusing Oceananigans.Units\nusing GyreInABox\n\nparameters = GyreInABoxParameters()\noutput_types = (LongitudeDepthSlice(), HorizontalSlice())\nconfiguration = GyreInABoxConfiguration(output_types=output_types)\nrun_simulation(parameters, configuration)\nfor output_type in output_types\n    record_animation(configuration, output_type)\nend\nnothing # hide\n\n(Image: Example simulated output (longitude-depth slice)) (Image: Example simulated output (horizontal slice))","category":"section"},{"location":"#API-reference","page":"Home","title":"API reference","text":"","category":"section"},{"location":"#GyreInABox.GyreInABox","page":"Home","title":"GyreInABox.GyreInABox","text":"Oceananigans based model of an ocean gyre in a bounded domain.\n\nDetails\n\nModel of wind and buoyancy forced ocean gyre adapted from MITgcm baroclinic ocean gyre example from documentation implemented using Oceananigans (Ramadhan et al. 2020).\n\nCompared to MITgcm example, beyond the change in the underlying software framework, some key differences in the (default) model configuration are\n\nThe model uses a seawater buoyancy formulation with tracer fields corresponding to salinity and (potential) temperature used to determine the buoyancy using a non-linear (polynomial) equation of state (Roquet et al. 2015).\nA weighted essentially non-oscillatory numerical scheme is used for momentum advection (Silvestri et al. 2024).\nThe turbulence closure / parameterization used for small-scale turbulent mixing is a convective adjustment turbulent kinetic energy (CATKE) scheme (Wagner et al. 2025).\nAdaptive time stepping is used based on controlling advective CFL number.\n\nDepthTimeAveraged\nGyreInABoxConfiguration\nGyreInABoxParameters\nHorizontalSlice\nLatitudeDepthSlice\nLongitudeDepthSlice\ninitialize_model!\nrecord_animation\nrun_simulation\nsetup_model\nsetup_simulation\n\nReferences\n\nMITgcm contributors (2025). MITgcm/MITgcm: checkpoint69e (Version checkpoint69e). Zenodo. https://doi.org/10.5281/zenodo.15320163\nRamadhan, A., Wagner, G., Hill, C., Campin, J. M., Churavy, V., Besard, T., Souza, A., Edelman, A., Ferrari, R. & Marshall, J. (2020). Oceananigans. jl: Fast and friendly geophysical fluid dynamics on GPUs. Journal of Open Source Software, 5(53).\nRoquet, F.; Madec, G.; Brodeau, L. and Nycander, J. (2015). Defining a simplified yet “realistic” equation of state for seawater. Journal of Physical Oceanography 45, 2564-2579.\nSilvestri, S., Wagner, G. L., Campin, J. M., Constantinou, N. C., Hill, C. N.,  Souza, A., & Ferrari, R. (2024). A new WENO-based momentum advection scheme for simulations of ocean mesoscale turbulence. Journal of Advances in Modeling Earth Systems, 16(7), e2023MS004130.\nWagner, G. L., Hillier, A., Constantinou, N. C., Silvestri, S., Souza, A., Burns, K. J., Hill, C., Campin, J-M., Marshall, J. & Ferrari, R. (2025). Formulation and calibration of CATKE, a one-equation parameterization for microscale ocean mixing. Journal of Advances in Modeling Earth Systems, 17(4), e2024MS004522.\n\n\n\n\n\n","category":"module"},{"location":"#GyreInABox.DepthTimeAveraged","page":"Home","title":"GyreInABox.DepthTimeAveraged","text":"struct DepthTimeAveraged{T} <: GyreInABox.AbstractHorizontalOutputType{T}\n\nDepth and time averaged output.\n\nDetails\n\nRecords horizontal fields corresponding to depth averaged model velocity and traced  fields temporally averaged over a specified window and a given temporal interval.\n\ninterval::Any: Time interval to record output at / s\naverage_window::Any: Time window to accumulate output averages over / s\n\n\n\n\n\n","category":"type"},{"location":"#GyreInABox.GyreInABoxConfiguration","page":"Home","title":"GyreInABox.GyreInABoxConfiguration","text":"struct GyreInABoxConfiguration{T, A<:Oceananigans.Architectures.AbstractArchitecture, EOS, MA<:Oceananigans.Advection.AbstractAdvectionScheme, C<:Oceananigans.Coriolis.AbstractRotation, TC<:Oceananigans.TurbulenceClosures.AbstractTurbulenceClosure}\n\nConfiguration for ocean gyre model.\n\nDetails\n\nVariables defining overall configuration of model such as spatial and temporal domains and corresponding discretizations, numerical schemes to use for different model components and outputs to record.\n\nCompared to the GyreInABoxParameters the fields here mostly have discrete values and would not be typically calibrated to data.\n\narchitecture::Oceananigans.Architectures.AbstractArchitecture: Computational architecture to run simulation on\nmomentum_advection::Oceananigans.Advection.AbstractAdvectionScheme: Momentum advection scheme\nequation_of_state::Any: Buoyancy equation of state\ncoriolis::Oceananigans.Coriolis.AbstractRotation: Coriolis force\nclosure::Oceananigans.TurbulenceClosures.AbstractTurbulenceClosure: Turbulence closure\ntracers::Tuple: Tracer variables - needs to match turbulence closure and buoyancy formulation.\ngrid_size::Tuple: Grid dimensions in longitude, latitude and depth\nlongitude_interval::Tuple: Extent of spatial domain in longitude / °\nlatitude_interval::Tuple: Extent of spatial domain in latitude / °\ndepth_interval::Tuple: Extent of spatial domain in depth / m\ndepth_stretching_factor::Any: Stretching factor for hyperbolic spaced depth grid\nhalo_size::Tuple: Dimensions of grid halo region in longitude, latitude and depth\nsimulation_time::Any: Time to simulate for / s\ninitial_timestep::Any: Initial time step to use / s\nmaximum_timestep::Any: Maximum time step to use in time step adaptation / s\noutput_filename::String: Stem of output file names\nprogress_message_interval::Int64: Iteration interval between progress messages\ntarget_cfl::Any: Target (advective) CFL number for time stepping wizard\nwizard_update_interval::Int64: Update (iteration) interval for time stepping wizard\nwizard_max_change::Any: Maximum relative time step change in each wizard update\noutput_types::Tuple: Output types to record during simulation\n\n\n\n\n\n","category":"type"},{"location":"#GyreInABox.GyreInABoxParameters","page":"Home","title":"GyreInABox.GyreInABoxParameters","text":"struct GyreInABoxParameters{T}\n\nParameters for ocean gyre model.\n\nDetails\n\nReal-valued parameters of model controlling initial and boundary conditions.\n\nu_10::Any: Average zonal wind velocity 10 meters above the ocean / m s⁻¹\nc_d::Any: Dimensionless drag coefficient\nρ_a::Any: Approximate average density of air at sea-level, kg m⁻³\nφ_u::Any: Latitude offset for zonal wind stress variation / °\nLφ_u::Any: Latitude scale for zonal wind stress variation / °\nφ_S::Any: Latitude offset for reference salinity variation / °\nLφ_S::Any: Latitude scale for reference salinity variation / °\nμ::Any: Bottom drag damping / m s⁻¹\nρ_s::Any: Sea water density / kg m⁻³\nc_s::Any: Sea water specific heat capacity / J K⁻¹ kg⁻¹\nT_polar::Any: Reference polar surface temperature / °C\nT_equatorial::Any: Reference equatorial surface temperature / °C\nT_abyssal::Any: Reference abyssal ocean temperature / °C\nz_thermocline::Any: Thermocline reference depth / m\nℓ_thermocline::Any: Thermocline reference length scale / m\nz_halocline::Any: Halocline reference depth / m\nℓ_halocline::Any: Halocline reference length scale / m\nS_0::Any: Salinity reference level / g kg⁻¹\nΔS::Any: Salinity latitude variation amplitude / g kg⁻¹\nτ_S::Any: Salinity restoring timescale / s\nτ_T::Any: Temperature restoring timescale / s\n\n\n\n\n\n","category":"type"},{"location":"#GyreInABox.HorizontalSlice","page":"Home","title":"GyreInABox.HorizontalSlice","text":"struct HorizontalSlice{T} <: GyreInABox.AbstractHorizontalOutputType{T}\n\nHorizontal (latitude-longitude) slice output.\n\nDetails\n\nRecords horizontal slices through model velocity and tracer fields at specified depth and interval.\n\ndepth::Any: Depth of slice / m\ninterval::Any: Time interval to record output at / s\n\n\n\n\n\n","category":"type"},{"location":"#GyreInABox.LatitudeDepthSlice","page":"Home","title":"GyreInABox.LatitudeDepthSlice","text":"struct LatitudeDepthSlice{T} <: GyreInABox.AbstractVerticalOutputType{T}\n\nVertical (latitude-depth) slice output.\n\nDetails\n\nRecords vertical slices through model velocity and tracer fields at specified longitude and interval.\n\nlongitude::Any: Longitude of slice / °\ninterval::Any: Time interval to record output at / s\n\n\n\n\n\n","category":"type"},{"location":"#GyreInABox.LongitudeDepthSlice","page":"Home","title":"GyreInABox.LongitudeDepthSlice","text":"struct LongitudeDepthSlice{T} <: GyreInABox.AbstractVerticalOutputType{T}\n\nVertical (longitude-depth) slice output.\n\nDetails\n\nRecords vertical slices through model velocity and tracer fields at specified latitude and interval.\n\nlatitude::Any: Latitude of slice / °\ninterval::Any: Time interval to record output at / s\n\n\n\n\n\n","category":"type"},{"location":"#GyreInABox.add_output_writers!-Union{Tuple{T}, Tuple{Oceananigans.Simulations.Simulation, GyreInABoxConfiguration{T}}} where T","page":"Home","title":"GyreInABox.add_output_writers!","text":"Register output writers for output types specified in configuration in simulation.\n\nadd_output_writers!(simulation, configuration)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.add_progress_message_callback!-Union{Tuple{T}, Tuple{Oceananigans.Simulations.Simulation, GyreInABoxConfiguration{T}}} where T","page":"Home","title":"GyreInABox.add_progress_message_callback!","text":"Add callback for progress updates as configured in configuration in simulation.\n\nadd_progress_message_callback!(simulation, configuration)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.axis_aspect_ratio-Tuple{Any, GyreInABox.AbstractOutputType}","page":"Home","title":"GyreInABox.axis_aspect_ratio","text":"Aspect ratio for field heatmaps.\n\naxis_aspect_ratio(\n    configuration,\n    output_type::GyreInABox.AbstractOutputType\n) -> Makie.AxisAspect\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.axis_limits-Tuple{GyreInABoxConfiguration, GyreInABox.AbstractOutputType}","page":"Home","title":"GyreInABox.axis_limits","text":"Axis limits for field heatmaps.\n\naxis_limits(\n    configuration::GyreInABoxConfiguration,\n    _::GyreInABox.AbstractOutputType\n) -> Tuple{Tuple, Tuple}\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.axis_xlabel-Tuple{GyreInABox.AbstractOutputType}","page":"Home","title":"GyreInABox.axis_xlabel","text":"Label for horizontal axis for field heatmaps.\n\naxis_xlabel(_::GyreInABox.AbstractOutputType) -> String\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.axis_ylabel-Tuple{GyreInABox.AbstractOutputType}","page":"Home","title":"GyreInABox.axis_ylabel","text":"Label for vertical axis for field heatmaps.\n\naxis_ylabel(_::GyreInABox.AbstractOutputType) -> String\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.bottom_meridional_drag-Tuple{Any, Any, Any, Any, Any, GyreInABoxParameters}","page":"Home","title":"GyreInABox.bottom_meridional_drag","text":"Bottom surface drag on meridional velocity component in m² s⁻².\n\nbottom_meridional_drag(i, j, grid, clock, model_fields, p)\n\n\nDetails\n\nComputes bottom surface drag at horizontal grid indices i and j for grid grid and model clock clock, with current model fields model_fields and parameters p.\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.bottom_zonal_drag-Tuple{Any, Any, Any, Any, Any, GyreInABoxParameters}","page":"Home","title":"GyreInABox.bottom_zonal_drag","text":"Bottom surface drag on zonal velocity component in m² s⁻².\n\nbottom_zonal_drag(i, j, grid, clock, model_fields, p)\n\n\nDetails\n\nComputes bottom surface drag at horizontal grid indices i and j for grid grid and model clock clock, with current model fields model_fields and parameters p.\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.boundary_conditions-Union{Tuple{T}, Tuple{GyreInABoxParameters{T}, Oceananigans.Grids.AbstractGrid}} where T","page":"Home","title":"GyreInABox.boundary_conditions","text":"Construct named tuple of boundary conditions for model given parameters parameters.\n\nboundary_conditions(parameters, grid)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.hyperbolically_spaced_faces-Tuple{Int64, GyreInABoxConfiguration}","page":"Home","title":"GyreInABox.hyperbolically_spaced_faces","text":"Compute hyperbolically spaced depth grid face coordinate at index k given model configuration configuration.\n\nhyperbolically_spaced_faces(k, configuration)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.indices-Tuple{GyreInABox.AbstractOutputType, Any}","page":"Home","title":"GyreInABox.indices","text":"Spatial grid indices output type records fields at.\n\nindices(\n    type::GyreInABox.AbstractOutputType,\n    grid\n) -> Tuple{Colon, Colon, Any}\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.initial_salinity-Tuple{Any, Any, Any}","page":"Home","title":"GyreInABox.initial_salinity","text":"Initial salinity at latitude φ and depth z with parameters p.\n\ninitial_salinity(φ, z, p)\n\n\nDetails\n\nComputes a latitude and depth dependent initial salinity with halocline like profile which smoothly varies from a latitude dependent surface salinity to a constant deep ocean salinity with a sigmoidal profile.\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.initial_temperature-Tuple{Any, Any, Any}","page":"Home","title":"GyreInABox.initial_temperature","text":"Initial temperature at latitude φ and depth z with parameters p.\n\ninitial_temperature(φ, z, p)\n\n\nDetails\n\nComputes a latitude and depth dependent initial temperature with thermocline like profile which smoothly varies from a latitude dependent surface temperature to a constant deep ocean temperature with a sigmoidal profile.\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.initialize_model!-Union{Tuple{T}, Tuple{Oceananigans.AbstractModel, GyreInABoxParameters{T}}} where T","page":"Home","title":"GyreInABox.initialize_model!","text":"Initialize state of ocean gyre model model with parameters parameters.\n\ninitialize_model!(model, parameters)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.label-Tuple{GyreInABox.AbstractOutputType}","page":"Home","title":"GyreInABox.label","text":"Symbol label for output type to use in naming output file and registering output writer.\n\nlabel(_::GyreInABox.AbstractOutputType) -> Symbol\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.max_surface_wind_stress-Tuple{GyreInABoxParameters}","page":"Home","title":"GyreInABox.max_surface_wind_stress","text":"Maximal surface wind stress given parameters p in m² s⁻².\n\nmax_surface_wind_stress(p)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.output_filename-Tuple{GyreInABoxConfiguration, Symbol, String}","page":"Home","title":"GyreInABox.output_filename","text":"Filename to record outputs to.\n\noutput_filename(\n    configuration::GyreInABoxConfiguration,\n    label::Symbol,\n    extension::String\n) -> String\n\n\nDetails\n\nOutput filename stem is specified in configuration. For an output type type a label computed using label function is appended on to stem and file extension is specified by extension added.\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.outputs-Tuple{GyreInABox.AbstractOutputType, Any}","page":"Home","title":"GyreInABox.outputs","text":"Named tuple of output variables (fields) to record for output type.\n\noutputs(_::GyreInABox.AbstractOutputType, model) -> Any\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.record_animation-Union{Tuple{T}, Tuple{GyreInABoxConfiguration{T}, GyreInABox.AbstractOutputType}} where T","page":"Home","title":"GyreInABox.record_animation","text":"Record an animation of fields recorded as model output.\n\nrecord_animation(\n    configuration,\n    output_type;\n    figure_size,\n    frame_rate,\n    u_limits,\n    v_limits,\n    w_limits,\n    T_limits,\n    S_limits,\n    e_limits\n)\n\n\nDetails\n\nGenerates and record to file an animation of model outputs for a model configuration configuration and output type output_type. The simulation must have already been run for this configuration and with specified output type active.\n\nAnimation is generated using CairoMakie with a figure window size in pixels of (figure_size), frame rate in frames per second of frame_rate and limits for the zonal velocity, meridional velocity, vertical velocity, temperature, salinity and turbulent kinetic energy field value color mappings specified by u_limits, v_limits, w_limits, T_limits, S_limits and e_limits respectively.\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.reference_surface_salinity-Tuple{Any, GyreInABoxParameters}","page":"Home","title":"GyreInABox.reference_surface_salinity","text":"Reference surface salinity for restoring surface salinity boundary condition as function of latitude φand parametersp`.\n\nreference_surface_salinity(φ, p)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.reference_surface_temperature-Tuple{Any, GyreInABoxParameters}","page":"Home","title":"GyreInABox.reference_surface_temperature","text":"Reference surface temperature for restoring surface temperature boundary condition as function of latitude φand parametersp`.\n\nreference_surface_temperature(φ, p)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.run_simulation-Union{Tuple{T}, Tuple{GyreInABoxParameters{T}, GyreInABoxConfiguration{T}}} where T","page":"Home","title":"GyreInABox.run_simulation","text":"Setup and initialize model then setup and run simulation with parameters parameters and configuration configuration.\n\nrun_simulation(parameters, configuration)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.schedule-Tuple{GyreInABox.AbstractOutputType}","page":"Home","title":"GyreInABox.schedule","text":"Time schedule to record output type at.\n\nschedule(\n    _::GyreInABox.AbstractOutputType\n) -> Union{Oceananigans.Utils.TimeInterval{_A, Dates.DateTime} where _A, Oceananigans.Utils.TimeInterval{_A, <:Number} where _A}\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.setup_grid-Union{Tuple{GyreInABoxConfiguration{T}}, Tuple{T}} where T","page":"Home","title":"GyreInABox.setup_grid","text":"Set up ocean gyre model grid with configuration configuration optionally overriding architecture in configuration with architecture.\n\nsetup_grid(configuration; architecture)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.setup_model-Union{Tuple{T}, Tuple{GyreInABoxParameters{T}, GyreInABoxConfiguration{T}}} where T","page":"Home","title":"GyreInABox.setup_model","text":"Set up ocean gyre model with parameters parameters and configuration configuration.\n\nsetup_model(parameters, configuration)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.setup_simulation-Union{Tuple{T}, Tuple{Oceananigans.AbstractModel, GyreInABoxConfiguration{T}}} where T","page":"Home","title":"GyreInABox.setup_simulation","text":"Set up simulation for model model with configuration configuration.\n\nsetup_simulation(model, configuration)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.sigmoidal_depth_profile-NTuple{5, Any}","page":"Home","title":"GyreInABox.sigmoidal_depth_profile","text":"Sigmoidal depth profile which smoothly varies from f_top at z = 0 to f_bottom at z = -depth with length scale for smooth transition ℓ and offset for midpoint of smooth transition z_0.\n\nsigmoidal_depth_profile(z, z_0, ℓ, f_bottom, f_top)\n\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.surface_salinity_flux-NTuple{6, Any}","page":"Home","title":"GyreInABox.surface_salinity_flux","text":"Surface salinity flux in g kg⁻¹ m s⁻¹.\n\nsurface_salinity_flux(\n    i,\n    j,\n    grid,\n    clock,\n    model_fields,\n    parameters_and_Δz\n)\n\n\nDetails\n\nRelaxation boundary condition that restores surface salinity to latitude dependent profile determined by reference_surface_salinity.\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.surface_temperature_flux-NTuple{6, Any}","page":"Home","title":"GyreInABox.surface_temperature_flux","text":"Surface temperature flux in  K m s⁻¹.\n\nsurface_temperature_flux(\n    i,\n    j,\n    grid,\n    clock,\n    model_fields,\n    parameters_and_Δz\n)\n\n\nDetails\n\nRelaxation boundary condition that restores surface temperature to latitude dependent profile determined by reference_surface_temperature.\n\n\n\n\n\n","category":"method"},{"location":"#GyreInABox.zonal_wind_stress-Tuple{Any, Any, Any, GyreInABoxParameters}","page":"Home","title":"GyreInABox.zonal_wind_stress","text":"Zonal wind stress applied as surface (flux) boundary condition to velocity field.\n\nzonal_wind_stress(λ, φ, t, p)\n\n\nDetails\n\nComputes wind stress in zonal direction at longitude λ and latitude φ (both in degrees), time t and with model parameters p.\n\n\n\n\n\n","category":"method"}]
}
